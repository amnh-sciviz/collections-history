<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>AMNH Collections History</title>
  <meta name="description" content="A data-driven story of AMNH's collections history, present and future">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/vendor/normalize.css">
  <link rel="stylesheet" href="css/app.css">

</head>

<body>

  <div id="app" class="app">
    <div id="canvas" class="canvas"></div>
    <div id="text" class="text"></div>
  </div>

  <div id="debug"></div>

  <script type="x-shader/x-vertex" id="vertexshader">
    attribute float size;
    varying vec3 vColor;
    void main() {
      vColor = color;
      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
      gl_PointSize = size * (300.0 / -mvPosition.z);
      gl_Position = projectionMatrix * mvPosition;
    }
  </script>

  <script type="x-shader/x-fragment" id="fragmentshader">
    uniform sampler2D texture;
    uniform float groupAlpha;
    varying vec3 vColor;
    void main() {
      gl_FragColor = vec4( vColor, groupAlpha );
      gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );
    }
  </script>

  <script type="x-shader/x-vertex" id="vertexshader-sprite">
      attribute float size;
      attribute vec2 cellOffset;
      varying vec2 vCellOffset;
      varying vec3 vColor;
      void main() {
        vColor = color;
        float margin = 0.2;
        vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
        vCellOffset = cellOffset;
        gl_PointSize = size * (300.0 / -mvPosition.z) * (1.0-margin);
        gl_Position = projectionMatrix * mvPosition;
      }
    </script>

    <script type="x-shader/x-fragment" id="fragmentshader-sprite">
      uniform float groupAlpha;
      uniform vec2 cellSize;
      uniform sampler2D texture;
      varying vec2 vCellOffset;
      varying vec3 vColor;
      void main() {
        float x = gl_PointCoord.x*cellSize.x+cellSize.x*vCellOffset.x;
        float y = gl_PointCoord.y*cellSize.y+cellSize.y*vCellOffset.y;
        vec2 scaledPoint = vec2(x, y);
        gl_FragColor = vec4( vColor, groupAlpha );
        gl_FragColor = gl_FragColor * texture2D(texture, scaledPoint);
      }
    </script>

  <script src="js/vendor/jquery-3.3.1.min.js"></script>
  <script src="js/vendor/underscore-min.js"></script>
  <script src="js/vendor/three.min.js"></script>
  <script src="js/vendor/howler.min.js"></script>
  <script src="js/vendor/three.orbit.controls.js"></script>
  <script src="js/vendor/easing.js"></script>
  <script src="js/app.js"></script>
</body>

</html>
